datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  output   = "../.generated/client"
}

model Anime {
  id              Int                @id @default(autoincrement())
  name            String             @unique
  alternativeName String?
  season          Int
  airTime         String?
  titles          AnimeTitle[]
  descriptions    AnimeDescription[]
  posterimages    AnimePosterImage[]
  bannerimages    AnimeBannerImage[]
  torrents        AnimeTorrent[]
  createdAt       DateTime           @default(now())
  updatedAt       DateTime           @updatedAt
}

model AnimeTitle {
  id       Int    @id @default(autoincrement())
  title    String
  language String
  Anime    Anime  @relation(fields: [animeId], references: [id])
  animeId  Int
}

model AnimeDescription {
  id          Int    @id @default(autoincrement())
  description String @db.VarChar(1000)
  language    String
  Anime       Anime  @relation(fields: [animeId], references: [id])
  animeId     Int
}

model AnimePosterImage {
  id       Int     @id @default(autoincrement())
  provider String
  path     String  @db.VarChar(500)
  blurHash String?
  anime    Anime   @relation(fields: [animeId], references: [id])
  animeId  Int
}

model AnimeBannerImage {
  id       Int     @id @default(autoincrement())
  provider String
  path     String  @db.VarChar(500)
  blurHash String?
  anime    Anime   @relation(fields: [animeId], references: [id])
  animeId  Int
}

model AnimeTorrent {
  id               Int      @id @default(autoincrement())
  fileProvider     String
  episode          Int
  link             String
  broadcaster      String
  resolution       String
  audioFormat      String
  videoFormat      String
  fileName         String
  originalFileName String
  hash             String   @unique
  anime            Anime    @relation(fields: [animeId], references: [id])
  animeId          Int
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}
